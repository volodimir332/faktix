#!/bin/bash

echo "üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ FaktiX..."
echo "üìç –°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: http://localhost:3000"
echo "üîÑ –°–µ—Ä–≤–µ—Ä –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö"
echo "‚èπÔ∏è  –î–ª—è –∑—É–ø–∏–Ω–∫–∏ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Ctrl+C"
echo ""

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ
cleanup() {
    echo ""
    echo "üõë –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞..."
    pkill -f "next dev" 2>/dev/null
    exit 0
}

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ —Å–∏–≥–Ω–∞–ª—É –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è
trap cleanup SIGINT SIGTERM

# –ó–∞–ø—É—Å–∫–∞—î–º–æ —Å–µ—Ä–≤–µ—Ä
while true; do
    echo "üîÑ –ó–∞–ø—É—Å–∫ Next.js —Å–µ—Ä–≤–µ—Ä–∞..."
    npm run dev
    
    # –Ø–∫—â–æ —Å–µ—Ä–≤–µ—Ä –∑—É–ø–∏–Ω–∏–≤—Å—è, —á–µ–∫–∞—î–º–æ —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î–º–æ
    echo "‚ö†Ô∏è  –°–µ—Ä–≤–µ—Ä –∑—É–ø–∏–Ω–∏–≤—Å—è. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥–∏..."
    sleep 3
done 