<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Fix Test</title>
    <style>
        body { font-family: Arial, sans-serif; background: #1a1a1a; color: white; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: #2a2a2a; padding: 20px; border-radius: 10px; }
        button { background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 10px 5px; }
        .status { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #065f46; color: #d1fae5; }
        .error { background: #7f1d1d; color: #fecaca; }
        .info { background: #1e3a8a; color: #dbeafe; }
        .warning { background: #92400e; color: #fef3c7; }
        .log { background: #1f2937; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Server Fix Test</h1>
        <p>–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ postalCode.trim()</p>
        
        <div class="status success">
            <strong>‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong>
            <ul>
                <li>–ü–æ–º–∏–ª–∫–∞ postalCode.trim() is not a function</li>
                <li>–î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ undefined/null</li>
                <li>–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ –ø–æ—Ä—Ç—É 3000</li>
            </ul>
        </div>
        
        <div class="status info">
            <strong>‚ÑπÔ∏è –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong>
            <ul>
                <li>ares-api.ts: postalCode: aresData.adresa.psc || ''</li>
                <li>profil/page.tsx: postalCode: companyData.adresa.psc || ""</li>
                <li>registrace/page.tsx: postalCode: companyData.adresa.psc || ""</li>
            </ul>
        </div>
        
        <button onclick="testServer()">üåê –¢–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä</button>
        <button onclick="openRegistration()">üìù –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é</button>
        <button onclick="openProfile()">üë§ –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</button>
        <button onclick="openEmailVerification()">üìß –í—ñ–¥–∫—Ä–∏—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email</button>
        <button onclick="clearLogs()">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥–∏</button>
        
        <div class="status warning">
            <strong>‚ö†Ô∏è –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:</strong>
            <ul>
                <li>–°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –∑ IƒåO</li>
                <li>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –Ω–µ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞ postalCode.trim()</li>
                <li>–¢–µ—Å—Ç—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ–º–ø–∞–Ω—ñ—ó</li>
            </ul>
        </div>
        
        <div id="logContainer" class="log">
            –õ–æ–≥–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç...
        </div>
        
        <div id="status"></div>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            document.getElementById('status').innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function addLog(message) {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString();
            logContainer.innerHTML += `[${timestamp}] ${message}\n`;
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function clearLogs() {
            const logContainer = document.getElementById('logContainer');
            logContainer.innerHTML = '–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω–æ...\n';
        }

        async function testServer() {
            try {
                const response = await fetch('http://localhost:3000');
                if (response.ok) {
                    addLog('‚úÖ –°–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î –Ω–∞ –ø–æ—Ä—Ç—É 3000');
                    showStatus('‚úÖ –°–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î!', 'success');
                } else {
                    addLog(`‚ùå –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ —Å—Ç–∞—Ç—É—Å: ${response.status}`);
                    showStatus('‚ùå –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞', 'error');
                }
            } catch (error) {
                addLog(`‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: ${error.message}`);
                showStatus('‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è', 'error');
            }
        }

        function openRegistration() {
            window.open('http://localhost:3000/register', '_blank');
            addLog('üìù –í—ñ–¥–∫—Ä–∏—Ç–æ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π–Ω—É —Ñ–æ—Ä–º—É');
            showStatus('üìù –†–µ—î—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∞ —Ñ–æ—Ä–º–∞ –≤—ñ–¥–∫—Ä–∏—Ç–∞!', 'info');
        }

        function openProfile() {
            window.open('http://localhost:3000/profil', '_blank');
            addLog('üë§ –í—ñ–¥–∫—Ä–∏—Ç–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–æ—Ñ—ñ–ª—é');
            showStatus('üë§ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ—Ñ—ñ–ª—é –≤—ñ–¥–∫—Ä–∏—Ç–∞!', 'info');
        }

        function openEmailVerification() {
            window.open('http://localhost:3000/email-verification?email=test@example.com', '_blank');
            addLog('üìß –í—ñ–¥–∫—Ä–∏—Ç–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email');
            showStatus('üìß –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è email –≤—ñ–¥–∫—Ä–∏—Ç–∞!', 'info');
        }

        window.onload = function() {
            addLog('üöÄ Server Fix Test –≥–æ—Ç–æ–≤–∏–π!');
            addLog('üîß –ü–æ–º–∏–ª–∫–∞ postalCode.trim() –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞');
            addLog('üåê –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ http://localhost:3000');
            showStatus('üöÄ –¢–µ—Å—Ç –≥–æ—Ç–æ–≤–∏–π!', 'success');
        };
    </script>
</body>
</html>
